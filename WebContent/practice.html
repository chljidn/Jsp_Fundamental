<html lang="ko">
<head>
	<meta charset="utf-8">
    <title></title>
    <script type="text/javascript" src="js/jquery-3.5.1.js"></script>
    <script type="text/javascript"></script>
    <script>       
        //버튼을 누르면 데이터를 가져올 수 있는 작성문
        $(function(){
            $('#search').click(function(){
                $.ajax({
                    url : 'proxy.jsp?url=http://openapi.seoul.go.kr:8088/7a69797a5163686c39384158425559/xml/vtrHospitalInfo/1/1000/',
                    type : 'GET',
                    dataType : 'xml',
                    error : function(){
                        alert('error');
                    },
                    success : function(xml){
                           console.log(xml);  
                       //text() 함수는 선택한 요소 안의 내용을 가져오거나, 다른 내용으로 바꾸는 메서드    
                       //each : object와 배열 모두에서 사용할 수 있는 반복함수. 
                        $(xml).find("row").each(function(){
                        	//row열에서 들어와서 지도명 주소의 무슨구 인지를 text함수로 찾아서 변수로 저장.
                        		let NM = $(this).find("NM").text("input으로 들어온 변수");
                        	 	if("input으로 들어온 변수" == NM1) {                        	 		
	                        		let NM = $(this).find("NM").text();
		                            let ADDR = $(this).find("ADDR").text();
		                            let TEL = $(this).find("TEL").text();
		                            let XCODE = $(this).find("XCODE").text();
		                            let YCODE = $(this).find("YCODE").text();
                        	 	} else{
                        	 		break;
                        	 	}
	                            	                            
	                            var summ = NM+", "+ADDR+","+TEL+", "+XCODE+", "+YCODE+"<br>"; 
	                            $('#search').append(summ);
                    	});  

                     }
                    
                });
            });

        });
    </script>

</head>
<body>
    <h3>동물병원</h3>
    <!--  <form action>은 폼 데이터를 서버로 보낼 때 해당 데이터가 도착할 URL을 명시함  -->
    <!--  <form name> 속성은 해당 폼의 이름을 명시 -->
         <!-- 검색창 -->
        <input type="text" name = "searching" id = "searching" placeholder = "예)강북구">               
		<!-- type = "submit" => 버튼이 서버로 양식데이터를 제출함. 지정하지 않은 경우 기본값. -->
        <button id ="search" type = "submit">검색</button>
        <div id = 'sel'></div>
</body>

    
</html>
